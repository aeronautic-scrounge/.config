{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent Registry Schema",
  "description": "Schema for agent registry tracking and metadata",
  "type": "object",
  "required": ["schema_version", "last_updated", "agents"],
  "properties": {
    "schema_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of the registry schema"
    },
    "last_updated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 timestamp of last registry update"
    },
    "agents": {
      "type": "object",
      "description": "Collection of registered agents",
      "patternProperties": {
        "^[a-z0-9-]+$": {
          "type": "object",
          "required": ["type", "category", "description", "tools", "metrics", "behavioral_file"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["specialized", "hierarchical"],
              "description": "Agent type: specialized (single-purpose) or hierarchical (coordinates subagents)"
            },
            "category": {
              "type": "string",
              "enum": ["research", "planning", "implementation", "debugging", "documentation", "analysis", "coordination"],
              "description": "Primary functional category of the agent"
            },
            "description": {
              "type": "string",
              "minLength": 10,
              "maxLength": 200,
              "description": "Brief description of agent purpose and capabilities"
            },
            "tools": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["Read", "Write", "Edit", "Bash", "Grep", "Glob", "WebSearch", "WebFetch", "Task"]
              },
              "description": "Tools available to the agent"
            },
            "metrics": {
              "type": "object",
              "required": ["total_invocations", "successful_invocations", "failed_invocations", "average_duration_seconds"],
              "properties": {
                "total_invocations": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Total number of times agent has been invoked"
                },
                "successful_invocations": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Number of successful invocations"
                },
                "failed_invocations": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Number of failed invocations"
                },
                "average_duration_seconds": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Average execution duration in seconds"
                },
                "last_invocation": {
                  "type": ["string", "null"],
                  "format": "date-time",
                  "description": "ISO-8601 timestamp of last invocation"
                }
              },
              "description": "Performance metrics for the agent"
            },
            "dependencies": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of utilities or libraries the agent depends on"
            },
            "behavioral_file": {
              "type": "string",
              "pattern": "^\\.claude/agents/[a-z0-9-]+\\.md$",
              "description": "Path to the agent's behavioral guidelines markdown file"
            }
          }
        }
      }
    }
  }
}
